<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Сбор КП конкурентов</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <main class="container">
    <h1>Сбор КП конкурентов</h1>
    <p class="subtitle">Заполните форму для фиксации КП конкурентов. Загрузка файла поддерживается.</p>

    <form id="kp-form" novalidate>
      <section class="card">
        <h2>Данные о компании</h2>
        <div class="grid">
          <div class="field">
            <label for="companyName">Название компании конкурента*</label>
            <input type="text" id="companyName" name="companyName" required maxlength="200" placeholder="ООО Ромашка"/>
            <div class="error" data-error-for="companyName"></div>
          </div>

          <div class="field">
            <label for="proposalTitle">Название/тематика КП*</label>
            <input type="text" id="proposalTitle" name="proposalTitle" required maxlength="200" placeholder="Поставка оборудования..."/>
            <div class="error" data-error-for="proposalTitle"></div>
          </div>

          <div class="field">
            <label for="amount">Сумма предложения*</label>
            <input type="number" id="amount" name="amount" required min="0" step="0.01" placeholder="100000"/>
            <div class="error" data-error-for="amount"></div>
          </div>

          <div class="field">
            <label for="currency">Валюта*</label>
            <select id="currency" name="currency" required>
              <option value="">Выберите валюту</option>
              <option value="RUB">RUB</option>
              <option value="USD">USD</option>
              <option value="EUR">EUR</option>
            </select>
            <div class="error" data-error-for="currency"></div>
          </div>

          <div class="field">
            <label for="proposalDate">Дата КП*</label>
            <input type="date" id="proposalDate" name="proposalDate" required/>
            <div class="error" data-error-for="proposalDate"></div>
          </div>

          <div class="field">
            <label for="sourceLink">Ссылка на источник</label>
            <input type="url" id="sourceLink" name="sourceLink" placeholder="https://..."/>
            <div class="error" data-error-for="sourceLink"></div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Контактные данные</h2>
        <div class="grid">
          <div class="field">
            <label for="contactPerson">Контактное лицо</label>
            <input type="text" id="contactPerson" name="contactPerson" maxlength="150" placeholder="Иван Иванов"/>
          </div>

          <div class="field">
            <label for="phone">Телефон</label>
            <input type="tel" id="phone" name="phone" maxlength="30" placeholder="+7 900 000-00-00"/>
          </div>

          <div class="field">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" maxlength="150" placeholder="name@example.com"/>
            <div class="error" data-error-for="email"></div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>Файл КП и комментарии</h2>
        <div class="grid">
          <div class="field">
            <label for="proposalFile">Файл КП (PDF, DOCX, XLSX, не более 20 МБ)</label>
            <input type="file" id="proposalFile" name="proposalFile" accept=".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg"/>
            <div class="hint">Файл будет сохранён в указанную папку Google Drive.</div>
            <div class="error" data-error-for="proposalFile"></div>
          </div>

          <div class="field field--full">
            <label for="notes">Комментарии</label>
            <textarea id="notes" name="notes" rows="4" maxlength="2000" placeholder="Ключевые условия, сроки, особенности..."></textarea>
          </div>
        </div>
      </section>

      <section class="consent">
        <label class="checkbox">
          <input type="checkbox" id="consent" name="consent" required/>
          <span>Я подтверждаю корректность указанных данных и согласен(на) на обработку данных*</span>
        </label>
        <div class="error" data-error-for="consent"></div>
      </section>

      <div class="actions">
        <button type="submit" id="submitBtn" class="btn btn-primary">Отправить</button>
        <button type="reset" class="btn btn-secondary">Очистить</button>
      </div>

      <div id="formStatus" role="status" aria-live="polite" class="status"></div>
    </form>
  </main>

  <script>
    // ВАЖНО: фронтенд шлёт на ваш сервер (без CORS), сервер — на GAS
    window.GAS_ENDPOINT = "/api/kp";
  </script>
  <script src="script.js" defer></script>
</body>
</html>
